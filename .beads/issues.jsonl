{"id":"bd-1vs","title":"Phase D: Offline Data Core","description":"Build the foundation for offline-first operation. Two SQLite databases: content.db (read-only, swapped on update) and user.db (read-write, never lost). Key deliverables: SQLite schema with FTS5, repository layer with reactive queries, lazy locale hydration, bundled seed content, error boundaries with degradation tiers. Why this architecture: Content updates become fast file swaps with no migration risk and no user data corruption. Performance targets: DB query P95 < 50ms, search P95 < 100ms. FTS tables ship prebuilt (never build at first launch).","status":"open","priority":0,"issue_type":"epic","created_at":"2026-02-17T17:37:14.170291Z","created_by":"osekkat","updated_at":"2026-02-17T17:37:14.170291Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["data-layer","offline","phase-d"],"dependencies":[{"issue_id":"bd-1vs","depends_on_id":"bd-32b","type":"blocks","created_at":"2026-02-17T17:37:14.170291Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-1vs.1","title":"Define SQLite schema for content.db and user.db","description":"Create src/data/schema.ts with full SQLite schema from AGENTS.md. Content DB: places_base (locale-independent), places_i18n (per-locale), itineraries, itinerary_days, itinerary_stops, picks, tips, phrases, day_trips. FTS5 virtual table: places_fts with BM25 ranking. User DB: favorites, notes, checklist_items, issue_reports, downloads. Include migration framework for future schema changes. Use expo-sqlite with WAL mode for better concurrent read performance. Document schema decisions and constraints.","status":"open","priority":0,"issue_type":"task","created_at":"2026-02-17T17:37:21.357988Z","created_by":"osekkat","updated_at":"2026-02-17T18:03:02.148884Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["data-layer","phase-d","sqlite"],"dependencies":[{"issue_id":"bd-1vs.1","depends_on_id":"bd-1vs","type":"parent-child","created_at":"2026-02-17T17:37:21.357988Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-1vs.1","depends_on_id":"bd-32b.1","type":"blocks","created_at":"2026-02-17T18:03:02.148865Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-1vs.2","title":"Implement typed repository layer with reactive queries","description":"Create src/data/repository.ts with typed data access methods: getPlaces(), getPlaceById(), getItineraries(), getPicks(), getTips(), getPhrases(), getDayTrips(). All methods return typed data (Place, Itinerary, etc.). Implement efficient queries joining base + i18n tables for active locale. Create src/data/useContentQuery.ts: reactive hook that subscribes to DB change events, auto-invalidates when content is swapped (listens to 'content-swapped' event from SyncStore). Ensure all queries are async and use prepared statements for performance.","status":"open","priority":0,"issue_type":"task","created_at":"2026-02-17T17:37:28.508580Z","created_by":"osekkat","updated_at":"2026-02-17T17:37:28.508580Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["data-layer","phase-d","repository"],"dependencies":[{"issue_id":"bd-1vs.2","depends_on_id":"bd-1vs","type":"parent-child","created_at":"2026-02-17T17:37:28.508580Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-1vs.2","depends_on_id":"bd-1vs.1","type":"blocks","created_at":"2026-02-17T17:37:28.508580Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-1vs.3","title":"Implement lazy locale hydration for fast first launch","description":"CRITICAL for cold start performance. On first launch: hydrate ONLY device's detected locale + English fallback into content.db from bundled JSON packs. Do NOT hydrate all 7 locales. On language switch: hydrate new locale from bundled pack on background thread, show loading indicator, rebuild FTS index for new locale (<500ms). Store hydration status per locale. Ensure app is usable immediately with device locale. Test: fresh install -> immediate usability, language switch -> smooth transition with progress.","status":"open","priority":0,"issue_type":"task","created_at":"2026-02-17T17:37:35.924704Z","created_by":"osekkat","updated_at":"2026-02-17T17:37:35.924704Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["data-layer","offline-first","phase-d"],"dependencies":[{"issue_id":"bd-1vs.3","depends_on_id":"bd-1vs","type":"parent-child","created_at":"2026-02-17T17:37:35.924704Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-1vs.3","depends_on_id":"bd-1vs.2","type":"blocks","created_at":"2026-02-17T17:37:35.924704Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-1vs.4","title":"Create bundled baseline content packs","description":"Populate src/content/packs/ with seed content for all 7 locales. Minimum viable content: 20-30 places across all categories, 4 itineraries (1day, weekend, long-weekend, 1week), 12 picks (one per category), essential tips sections, 50+ phrases. Create src/content/manifest.json matching ContentManifest schema (version, sequence, checksums). Ensure all placeId references are valid. Generate ThumbHash for all images. This bundled content is the 'works offline from first launch' foundation. Sign manifest with development key.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T17:37:43.427991Z","created_by":"osekkat","updated_at":"2026-02-17T17:37:43.427991Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["content","data-layer","phase-d"],"dependencies":[{"issue_id":"bd-1vs.4","depends_on_id":"bd-1vs","type":"parent-child","created_at":"2026-02-17T17:37:43.427991Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-1vs.4","depends_on_id":"bd-1vs.1","type":"blocks","created_at":"2026-02-17T17:37:43.427991Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-1vs.5","title":"Implement error boundaries and degradation tiers","description":"Implement the degradation tier system from AGENTS.md. Wrap each tab in React error boundary with 'Something went wrong - tap to retry' fallback. Implement tier detection and graceful degradation: Tier 0 (healthy), Tier 1 (degraded search - FTS corrupt -> browse-only, auto-rebuild), Tier 2 (degraded maps - SDK crash -> static fallback), Tier 3 (degraded content - DB corrupt -> rollback to baseline, show banner), Tier 4 (emergency only - catastrophic -> Emergency Mode always works). Log tier transitions to crash reporter with context.","status":"open","priority":0,"issue_type":"task","created_at":"2026-02-17T17:37:51.275717Z","created_by":"osekkat","updated_at":"2026-02-17T17:37:51.275717Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["error-handling","phase-d","reliability"],"dependencies":[{"issue_id":"bd-1vs.5","depends_on_id":"bd-1vs","type":"parent-child","created_at":"2026-02-17T17:37:51.275717Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-1vs.5","depends_on_id":"bd-1vs.2","type":"blocks","created_at":"2026-02-17T17:37:51.275717Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-1vs.6","title":"Create Zustand stores for app state management","description":"Create src/stores/useAppStore.ts for UI state: active locale, current screen, loading states, degradation tier. Create src/stores/useSettingsStore.ts for user preferences: theme (system/light/dark), data usage mode, map quality, accessibility settings - persisted via AsyncStorage. Create sync coordinator in useAppStore that emits 'content-swapped' events when content updates complete. Keep stores minimal - content data lives in SQLite, not Zustand. Follow Zustand best practices: selectors, no unnecessary re-renders.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T17:37:58.915218Z","created_by":"osekkat","updated_at":"2026-02-17T18:38:21.706134Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["phase-d","state","zustand"],"dependencies":[{"issue_id":"bd-1vs.6","depends_on_id":"bd-1vs","type":"parent-child","created_at":"2026-02-17T17:37:58.915218Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-1vs.6","depends_on_id":"bd-1xp.5","type":"blocks","created_at":"2026-02-17T18:38:21.706112Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-1xp","title":"Phase A: Foundation & Project Setup","description":"Strategic foundation phase establishing ALL infrastructure dependencies. Nothing proceeds until complete. Includes: Expo SDK 54 project with TypeScript, Expo Router v6 with 5-tab shell, CI/CD pipeline with quality gates, ESLint/TypeScript config, basic project structure. Success criteria: npx expo start works, tsc/eslint pass, 5-tab navigation visible. Technical decisions: Expo SDK 54 Managed Workflow, Hermes enabled, expo-router v6, Jest testing.","status":"closed","priority":0,"issue_type":"epic","created_at":"2026-02-17T17:34:49.616794Z","created_by":"osekkat","updated_at":"2026-02-17T20:56:46.372009Z","closed_at":"2026-02-17T20:56:46.371995Z","close_reason":"Phase A Foundation complete: Expo SDK 54 with TypeScript, Expo Router v6 with 5-tab navigation, ESLint/Prettier with strict rules, Jest testing, project structure, EAS Build config, performance dependencies (@shopify/flash-list, reanimated, gesture-handler, expo-image). All quality gates pass.","source_repo":".","compaction_level":0,"original_size":0,"labels":["foundation","phase-a"]}
{"id":"bd-1xp.1","title":"Initialize Expo SDK 54 project with TypeScript","description":"Create new Expo project using 'npx create-expo-app@latest marrakechCompass3 --template expo-template-blank-typescript'. Verify Hermes engine enabled in app.json (newArchEnabled: true for Expo SDK 54). Configure TypeScript strict mode in tsconfig.json (strict: true, noUncheckedIndexedAccess: true). This is the FIRST task - everything else depends on it. Must use Expo SDK 54 with Managed Workflow (no ejection). SUCCESS CRITERIA: 'npx expo start' launches successfully, Metro bundler runs without errors, app renders on iOS Simulator and Android Emulator, 'npx tsc --noEmit' passes with no type errors.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-17T17:34:59.723282Z","created_by":"osekkat","updated_at":"2026-02-17T20:07:55.754058Z","closed_at":"2026-02-17T20:07:55.754039Z","close_reason":"Initialized Expo SDK 54 project with TypeScript strict mode, Hermes enabled (newArchEnabled: true), tsc --noEmit passes, expo start works","source_repo":".","compaction_level":0,"original_size":0,"labels":["expo","foundation","phase-a"],"dependencies":[{"issue_id":"bd-1xp.1","depends_on_id":"bd-1xp","type":"parent-child","created_at":"2026-02-17T17:34:59.723282Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-1xp.2","title":"Configure Expo Router v6 with 5-tab navigation shell","description":"Install expo-router v6 and configure file-based routing. Create app/(tabs)/_layout.tsx with 5 bottom tabs: Home, Picks, Explore, Maps, Tips. Create placeholder screen files for each tab. Configure correct tab icons using @expo/vector-icons. Ensure tab bar follows Apple HIG / Material Design guidelines (44pt touch targets). This establishes the navigation architecture - all screen work depends on it. Test navigation between all tabs on both iOS/Android.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-17T17:35:06.845008Z","created_by":"osekkat","updated_at":"2026-02-17T20:12:43.809149Z","closed_at":"2026-02-17T20:12:43.809136Z","close_reason":"Configured Expo Router v6 with 5-tab navigation (Home, Picks, Explore, Maps, Tips). All tabs have placeholder screens with Moroccan-inspired styling. TypeScript passes, Expo starts successfully.","source_repo":".","compaction_level":0,"original_size":0,"labels":["foundation","navigation","phase-a"],"dependencies":[{"issue_id":"bd-1xp.2","depends_on_id":"bd-1xp","type":"parent-child","created_at":"2026-02-17T17:35:06.845008Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-1xp.2","depends_on_id":"bd-1xp.1","type":"blocks","created_at":"2026-02-17T17:35:06.845008Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-1xp.3","title":"Configure ESLint + Prettier with strict TypeScript rules","description":"Install and configure ESLint with TypeScript-specific rules. Add Prettier for code formatting. Configure rules to enforce: no-any, strict null checks, explicit return types on exports, consistent imports. Add pre-commit hooks via husky + lint-staged. This ensures code quality from day 1 - prevents debt accumulation. Create .eslintrc.js, .prettierrc, and update package.json scripts. Verify npx eslint . passes on initial codebase.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-17T17:35:12.883460Z","created_by":"osekkat","updated_at":"2026-02-17T20:41:29.585046Z","closed_at":"2026-02-17T20:41:29.584998Z","close_reason":"Configured ESLint 9 with TypeScript-ESLint, strict rules (no-any, explicit return types, no-floating-promises), Prettier, Husky pre-commit hooks with lint-staged. npx eslint app/ passes with 0 errors.","source_repo":".","compaction_level":0,"original_size":0,"labels":["eslint","foundation","phase-a"],"dependencies":[{"issue_id":"bd-1xp.3","depends_on_id":"bd-1xp","type":"parent-child","created_at":"2026-02-17T17:35:12.883460Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-1xp.3","depends_on_id":"bd-1xp.1","type":"blocks","created_at":"2026-02-17T17:35:12.883460Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-1xp.4","title":"Configure Jest testing framework with React Native presets","description":"Configure Jest with React Native testing presets. Install @testing-library/react-native for component testing. Set up jest.config.js with proper transformers for TypeScript and React Native. Create sample test to verify setup works. Add coverage reporting configuration. Update package.json scripts: 'npm test', 'npm test -- --coverage'. This establishes testing infrastructure early - tests should be written alongside features. Verify test runner executes successfully.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-17T17:35:18.651732Z","created_by":"osekkat","updated_at":"2026-02-17T20:45:01.279063Z","closed_at":"2026-02-17T20:45:01.279047Z","close_reason":"Configured Jest 29 with jest-expo preset. Tests run with npm test. Coverage reporting configured. Sample test passes with 3/3 tests.","source_repo":".","compaction_level":0,"original_size":0,"labels":["foundation","phase-a","testing"],"dependencies":[{"issue_id":"bd-1xp.4","depends_on_id":"bd-1xp","type":"parent-child","created_at":"2026-02-17T17:35:18.651732Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-1xp.4","depends_on_id":"bd-1xp.1","type":"blocks","created_at":"2026-02-17T17:35:18.651732Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-1xp.5","title":"Create project directory structure per plan.md specification","description":"Create the full directory structure from plan.md: src/components/{ui,cards,maps,layout}, src/content/packs/{en,fr,es,de,it,nl,ar}, src/hooks, src/data, src/sync, src/search, src/routing, src/user, src/stores, src/services, src/themes, src/i18n/locales, src/types, assets/{images,fonts}, tools/content. Add .gitkeep files to empty directories. This structure is the scaffolding for all code organization. Must match the architecture diagram exactly.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-17T17:35:26.011138Z","created_by":"osekkat","updated_at":"2026-02-17T20:48:47.882948Z","closed_at":"2026-02-17T20:48:47.882924Z","close_reason":"Created full project directory structure per plan.md: 28 directories, 10 TypeScript source files with placeholder implementations. Includes: types, themes, i18n config, stores, data/schema, data/repository, hooks (locale, offline, favorites), content manifest. All TypeScript compiles.","source_repo":".","compaction_level":0,"original_size":0,"labels":["foundation","phase-a","project-structure"],"dependencies":[{"issue_id":"bd-1xp.5","depends_on_id":"bd-1xp","type":"parent-child","created_at":"2026-02-17T17:35:26.011138Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-1xp.5","depends_on_id":"bd-1xp.2","type":"blocks","created_at":"2026-02-17T17:35:26.011138Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-1xp.6","title":"Configure EAS Build for iOS and Android","description":"Set up EAS Build configuration. Create eas.json with profiles: development (simulator), preview (internal testing), production (store release). Configure app.json with proper bundle identifiers, version numbers, and platform-specific settings. Test development build on both platforms. This establishes the build pipeline for eventual app store deployment. Note: Do not configure EAS Submit yet - that comes at launch phase.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-17T17:35:33.102020Z","created_by":"osekkat","updated_at":"2026-02-17T20:56:36.760111Z","closed_at":"2026-02-17T20:56:36.760094Z","close_reason":"Configured EAS Build with eas.json (development, preview, production profiles), updated app.json with EAS settings (buildNumber, versionCode, location permissions, runtimeVersion), added EAS scripts to package.json, installed eas-cli.","source_repo":".","compaction_level":0,"original_size":0,"labels":["eas","foundation","phase-a"],"dependencies":[{"issue_id":"bd-1xp.6","depends_on_id":"bd-1xp","type":"parent-child","created_at":"2026-02-17T17:35:33.102020Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-1xp.6","depends_on_id":"bd-1xp.1","type":"blocks","created_at":"2026-02-17T17:35:33.102020Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-1xp.7","title":"Install core performance dependencies","description":"Install performance-critical dependencies needed by multiple features. @shopify/flash-list: High-performance replacement for FlatList (used in Explore, Picks, category listings). react-native-reanimated: Animation library (needed by expo-router, map markers, transitions). react-native-gesture-handler: Gesture handling (swipes, pan, pinch zoom on maps). Configure babel.config.js with required plugins. These are foundation dependencies that must be set up correctly before UI work begins. Test: basic FlashList renders with 100 items smoothly.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-17T18:04:31.508319Z","created_by":"osekkat","updated_at":"2026-02-17T20:56:38.721741Z","closed_at":"2026-02-17T20:56:38.721726Z","close_reason":"Installed @shopify/flash-list v2, react-native-reanimated, react-native-gesture-handler, expo-image, react-native-worklets. Configured babel.config.js with reanimated plugin. Created FlashListExample component. Wrapped app with GestureHandlerRootView.","source_repo":".","compaction_level":0,"original_size":0,"labels":["dependencies","foundation","phase-a"],"dependencies":[{"issue_id":"bd-1xp.7","depends_on_id":"bd-1xp","type":"parent-child","created_at":"2026-02-17T18:04:31.508319Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-1xp.7","depends_on_id":"bd-1xp.1","type":"blocks","created_at":"2026-02-17T18:04:35.456442Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-2va","title":"Phase I: Observability & Launch Hardening","description":"Final hardening phase before release. Build reliability infrastructure and pass all release gates after feature epics are complete (Maps, Search, and Planner/My Trip). Key deliverables: crash reporting with offline queue, performance instrumentation, diagnostics screen, background update scheduler, release gate suites, and store release configuration. Release gates are blockers, not suggestions: offline smoke, content security, performance budgets, size budgets, accessibility verification. Success: app meets quality bars end-to-end and is ready for App Store/Play Store submission.","status":"open","priority":1,"issue_type":"epic","created_at":"2026-02-17T17:42:02.281062Z","created_by":"osekkat","updated_at":"2026-02-17T18:19:36.930267Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["launch","observability","phase-i"],"dependencies":[{"issue_id":"bd-2va","depends_on_id":"bd-37m","type":"blocks","created_at":"2026-02-17T18:19:33.154623Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-2va","depends_on_id":"bd-3u5","type":"blocks","created_at":"2026-02-17T18:19:33.172800Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-2va","depends_on_id":"bd-8es","type":"blocks","created_at":"2026-02-17T17:42:02.281062Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-2va.1","title":"Implement crash reporting with offline queue","description":"Create src/monitoring/crash.ts. Integrate crash reporting SDK (Sentry or similar Expo-compatible). Configure offline queue: capture crashes even without network, upload on reconnect. Add structured context: app version, device info, content version, degradation tier, locale. Privacy-first: no precise location without consent, no PII. Add event taxonomy for key journeys: search, save, map download, emergency mode, content update. Export debug bundle capability (logs + versions) for support. Test: simulate crash offline, reconnect, verify report uploaded.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T17:42:09.903313Z","created_by":"osekkat","updated_at":"2026-02-17T18:40:02.795130Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["crash","observability","phase-i"],"dependencies":[{"issue_id":"bd-2va.1","depends_on_id":"bd-1xp.5","type":"blocks","created_at":"2026-02-17T18:40:02.795109Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-2va.1","depends_on_id":"bd-2va","type":"parent-child","created_at":"2026-02-17T17:42:09.903313Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-2va.2","title":"Implement performance instrumentation","description":"Create src/monitoring/events.ts for performance metrics. Track: cold start time (JS load to Home rendered), search latency, DB query time, image load time, map render time, download speed. Set up performance budgets from AGENTS.md: cold start P75 <2s Android/<1.5s iOS, scroll 55+ FPS, search P95 <100ms, DB query P95 <50ms. Add performance traces around critical paths. Report metrics to analytics (privacy-compliant, aggregated). Alert in CI if performance regresses beyond budget. Profile on low-end devices.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T17:42:17.310237Z","created_by":"osekkat","updated_at":"2026-02-17T18:40:21.791663Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["observability","performance","phase-i"],"dependencies":[{"issue_id":"bd-2va.2","depends_on_id":"bd-1vs.2","type":"blocks","created_at":"2026-02-17T18:40:21.791643Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-2va.2","depends_on_id":"bd-2va","type":"parent-child","created_at":"2026-02-17T17:42:17.310237Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-2va.2","depends_on_id":"bd-37m.1","type":"blocks","created_at":"2026-02-17T18:40:21.769933Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-2va.2","depends_on_id":"bd-f2b.1","type":"blocks","created_at":"2026-02-17T18:40:21.747970Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-2va.3","title":"Implement Diagnostics screen","description":"Add Diagnostics section to Settings screen (or separate screen). Show: Content manifest version + signature verification status, last update attempt timestamp + failure reason if any, map pack inventory + storage usage per pack, search index status per locale + 'Rebuild Index' action, pending issue reports count, current degradation tier. Add 'Export Debug Bundle' action (creates shareable file with logs + versions). Add 'Force Rollback' action (for testing). Add 'Clear All Downloads' action. This is the self-healing control panel.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-17T17:42:24.489852Z","created_by":"osekkat","updated_at":"2026-02-17T18:40:14.762683Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["diagnostics","phase-i"],"dependencies":[{"issue_id":"bd-2va.3","depends_on_id":"bd-1vs.5","type":"blocks","created_at":"2026-02-17T18:40:14.762663Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-2va.3","depends_on_id":"bd-2va","type":"parent-child","created_at":"2026-02-17T17:42:24.489852Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-2va.3","depends_on_id":"bd-32b.3","type":"blocks","created_at":"2026-02-17T18:40:14.717545Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-2va.3","depends_on_id":"bd-3u5.5","type":"blocks","created_at":"2026-02-17T18:40:14.737487Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-2va.3","depends_on_id":"bd-f2b.10","type":"blocks","created_at":"2026-02-17T18:40:14.692588Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-2va.4","title":"Implement background content update scheduler","description":"Create src/sync/scheduler.ts using expo-task-manager + expo-background-fetch. On connectivity: fetch lightweight manifest from CDN (ETag/If-None-Match caching). Verify signature per Phase C implementation. If new content available: download pack with resumable Range requests. Respect constraints: Wi-Fi-only for large packs, skip if low battery, skip if low storage. Resume interrupted downloads. Schedule checks: when app foregrounds, periodic background (every 24h), on explicit refresh. Show subtle notification of available update. Never block UI.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T17:42:32.118637Z","created_by":"osekkat","updated_at":"2026-02-17T18:36:43.704774Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["background","phase-i","sync"],"dependencies":[{"issue_id":"bd-2va.4","depends_on_id":"bd-2va","type":"parent-child","created_at":"2026-02-17T17:42:32.118637Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-2va.4","depends_on_id":"bd-32b.2","type":"blocks","created_at":"2026-02-17T18:36:43.704755Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-2va.4","depends_on_id":"bd-32b.3","type":"blocks","created_at":"2026-02-17T18:36:43.676537Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-2va.5","title":"Implement release gate test suites","description":"Create comprehensive test suites for release gates (MUST PASS before deployment). OFFLINE SMOKE TEST: Core flows work in airplane mode immediately after fresh install. CONTENT SECURITY GATE: Manifest signature verification + pack checksum verification - reject tampered content. PERFORMANCE GATE: Cold start within budget, scroll FPS, search latency. SIZE GATE: JS bundle and app install size within budget. Configure CI to run all gates and FAIL BUILD on any gate failure. These are release blockers, not suggestions. Document threshold values and how to debug failures.","status":"open","priority":0,"issue_type":"task","created_at":"2026-02-17T17:42:39.070876Z","created_by":"osekkat","updated_at":"2026-02-17T18:40:48.777489Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["phase-i","release-gates","testing"],"dependencies":[{"issue_id":"bd-2va.5","depends_on_id":"bd-1vs.4","type":"blocks","created_at":"2026-02-17T18:40:48.755314Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-2va.5","depends_on_id":"bd-2va","type":"parent-child","created_at":"2026-02-17T17:42:39.070876Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-2va.5","depends_on_id":"bd-32b.2","type":"blocks","created_at":"2026-02-17T18:40:48.730192Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-2va.5","depends_on_id":"bd-f2b.1","type":"blocks","created_at":"2026-02-17T18:40:48.777469Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-2va.6","title":"Implement E2E test suites for critical flows","description":"Set up E2E testing using Detox or Maestro. Create test suites for critical user flows: Fresh install -> Home renders -> browse tabs -> place detail -> save to favorites. Search for place -> view results -> apply filters -> select result. Download map pack -> verify offline map works. Language switch -> verify content updates -> RTL renders correctly. Emergency Mode accessible from any screen. Test on both iOS and Android. Run on real devices for map/location flows. Include in CI pipeline.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T17:42:46.834709Z","created_by":"osekkat","updated_at":"2026-02-17T18:40:29.658172Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["e2e","phase-i","qa"],"dependencies":[{"issue_id":"bd-2va.6","depends_on_id":"bd-2va","type":"parent-child","created_at":"2026-02-17T17:42:46.834709Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-2va.6","depends_on_id":"bd-3u5.5","type":"blocks","created_at":"2026-02-17T18:40:29.638022Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-2va.6","depends_on_id":"bd-8es.1","type":"blocks","created_at":"2026-02-17T18:40:29.620154Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-2va.6","depends_on_id":"bd-8es.4","type":"blocks","created_at":"2026-02-17T18:40:29.658149Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-2va.6","depends_on_id":"bd-f2b.1","type":"blocks","created_at":"2026-02-17T18:40:29.572717Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-2va.6","depends_on_id":"bd-f2b.6","type":"blocks","created_at":"2026-02-17T18:40:29.598584Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-2va.7","title":"Configure App Store and Play Store release","description":"Final release preparation. Configure eas.json production profile with proper signing. Create App Store Connect listing: screenshots (all required sizes), app description, keywords, privacy policy URL. Create Play Store listing: screenshots, feature graphic, descriptions, content rating questionnaire. Configure app.json for production: remove development flags, set proper bundle IDs, version numbers. Test production build on physical devices. Configure EAS Submit for both stores. Create release checklist. Prepare for first submission.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T17:42:53.170775Z","created_by":"osekkat","updated_at":"2026-02-17T18:03:51.842131Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["launch","phase-i","store"],"dependencies":[{"issue_id":"bd-2va.7","depends_on_id":"bd-2va","type":"parent-child","created_at":"2026-02-17T17:42:53.170775Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-2va.7","depends_on_id":"bd-2va.5","type":"blocks","created_at":"2026-02-17T18:03:48.826293Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-2va.7","depends_on_id":"bd-2va.6","type":"blocks","created_at":"2026-02-17T18:03:48.845984Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-2va.7","depends_on_id":"bd-2va.8","type":"blocks","created_at":"2026-02-17T18:03:51.842112Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-2va.8","title":"Complete accessibility audit and fixes","description":"Comprehensive accessibility pass before release. iOS: VoiceOver smoke test on all core flows, Dynamic Type sizes work at 200% scale. Android: TalkBack smoke test, font scaling works. Both platforms: All interactive elements have accessibilityLabel/Role, correct focus order, correct contrast ratios, 44pt minimum touch targets, map POIs accessible as list alternative. RTL (Arabic) renders correctly. Reduce motion option disables all animations. Test with actual screen reader users if possible. Document any remaining accessibility gaps.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T17:43:00.223334Z","created_by":"osekkat","updated_at":"2026-02-17T18:40:41.574748Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["accessibility","phase-i","qa"],"dependencies":[{"issue_id":"bd-2va.8","depends_on_id":"bd-2va","type":"parent-child","created_at":"2026-02-17T17:43:00.223334Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-2va.8","depends_on_id":"bd-f2b.1","type":"blocks","created_at":"2026-02-17T18:40:41.444386Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-2va.8","depends_on_id":"bd-f2b.2","type":"blocks","created_at":"2026-02-17T18:40:41.466930Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-2va.8","depends_on_id":"bd-f2b.3","type":"blocks","created_at":"2026-02-17T18:40:41.529276Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-2va.8","depends_on_id":"bd-f2b.4","type":"blocks","created_at":"2026-02-17T18:40:41.551840Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-2va.8","depends_on_id":"bd-f2b.5","type":"blocks","created_at":"2026-02-17T18:40:41.574727Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-31h","title":"Phase B: Design System & Internationalization","description":"Establish the visual identity and multi-language foundation. Proving RTL (Arabic) early avoids expensive retrofits. Key deliverables: NativeWind v4 with Moroccan color tokens, custom fonts (Playfair Display, DM Sans), i18next with 7 locales, RTL support verified on test screen. Why this order: Design system needed before any UI components; i18n must be built-in not bolted-on. Technical: NativeWind v4 + Tailwind CSS, i18next + expo-localization. Risk: RTL bugs are subtle - test extensively with Arabic content early.","status":"open","priority":0,"issue_type":"epic","created_at":"2026-02-17T17:35:41.402911Z","created_by":"osekkat","updated_at":"2026-02-17T17:35:41.402911Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["design-system","i18n","phase-b"],"dependencies":[{"issue_id":"bd-31h","depends_on_id":"bd-1xp","type":"blocks","created_at":"2026-02-17T17:35:41.402911Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-31h.1","title":"Install and configure NativeWind v4 with Tailwind CSS","description":"Install NativeWind v4 (tailwindcss, nativewind). Create tailwind.config.js with theme extensions from plan.md: Moroccan colors (terracotta #C65D3B, teal #356B66, gold #D9A441, sand #D4C4A8, ochre #B07832), dark mode semantic tokens (backgroundDark #14110F, foregroundDark #F3EEE7, cardDark #1E1916). Configure babel.config.js for NativeWind. Create src/themes/index.ts exporting color tokens, typography scale, spacing scale. Test by applying styles to a placeholder component. This is the visual foundation - all UI components build on it.","status":"open","priority":0,"issue_type":"task","created_at":"2026-02-17T17:35:49.753916Z","created_by":"osekkat","updated_at":"2026-02-17T17:35:49.753916Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["design-system","nativewind","phase-b"],"dependencies":[{"issue_id":"bd-31h.1","depends_on_id":"bd-31h","type":"parent-child","created_at":"2026-02-17T17:35:49.753916Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-31h.2","title":"Configure custom fonts (Playfair Display, DM Sans)","description":"Install expo-font. Add Playfair Display (display font for headings/hero) and DM Sans (body font for content/UI) to assets/fonts/. Configure fonts in app.json. Create font loading in root layout using useFonts hook. Add fontFamily to tailwind.config.js: display: 'PlayfairDisplay', body: 'DMSans'. Create typography utility classes. Handle font loading state with AppLoading or SplashScreen.preventAutoHideAsync(). Test: headings use Playfair, body uses DM Sans.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T17:35:56.752551Z","created_by":"osekkat","updated_at":"2026-02-17T17:35:56.752551Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["design-system","fonts","phase-b"],"dependencies":[{"issue_id":"bd-31h.2","depends_on_id":"bd-31h","type":"parent-child","created_at":"2026-02-17T17:35:56.752551Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-31h.2","depends_on_id":"bd-31h.1","type":"blocks","created_at":"2026-02-17T17:35:56.752551Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-31h.3","title":"Configure i18next with expo-localization for 7 locales","description":"Install i18next, react-i18next, expo-localization. Create src/i18n/index.ts with configuration: fallbackLng 'en', supported locales [en,fr,es,de,it,nl,ar]. Create translation files in src/i18n/locales/ for each locale. Implement useLocale hook with fallback chain (e.g., ar -> fr -> en for French-influenced Arabic speakers). Configure language detector using expo-localization.getLocales(). Add language switcher to settings. Test: app detects device locale on first launch, allows manual override.","status":"open","priority":0,"issue_type":"task","created_at":"2026-02-17T17:36:04.928200Z","created_by":"osekkat","updated_at":"2026-02-17T17:36:04.928200Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["i18n","phase-b"],"dependencies":[{"issue_id":"bd-31h.3","depends_on_id":"bd-31h","type":"parent-child","created_at":"2026-02-17T17:36:04.928200Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-31h.3","depends_on_id":"bd-31h.1","type":"blocks","created_at":"2026-02-17T17:36:04.928200Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-31h.4","title":"Implement and verify RTL support for Arabic","description":"CRITICAL: RTL bugs are subtle and expensive to fix later. Configure I18nManager for RTL when Arabic is selected. Test RTL layout on a dedicated test screen with various components. Verify: text alignment, flex direction reversal, icons/arrows flip appropriately, margins/paddings correct, navigation gestures work. Create RTL-aware style utilities. Test with actual Arabic content (not placeholder). Add 'RTL Preview' toggle in dev settings for testing without switching locale. Document any RTL-specific component adjustments needed.","status":"open","priority":0,"issue_type":"task","created_at":"2026-02-17T17:36:13.002754Z","created_by":"osekkat","updated_at":"2026-02-17T17:36:13.002754Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["critical","i18n","phase-b","rtl"],"dependencies":[{"issue_id":"bd-31h.4","depends_on_id":"bd-31h","type":"parent-child","created_at":"2026-02-17T17:36:13.002754Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-31h.4","depends_on_id":"bd-31h.3","type":"blocks","created_at":"2026-02-17T17:36:13.002754Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-31h.5","title":"Create base UI components library","description":"Create foundational components in src/components/ui/: Button (primary/secondary/outline variants, loading state), Card (with shadow, border, image support), Badge (category pills, status indicators), Accordion (expandable sections for Tips), Text (styled with typography scale), Icon wrapper. All components must: use NativeWind styling, support dark mode, meet 44pt touch target minimum, include accessibilityLabel/Role, support RTL. Write basic snapshot tests for each component.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T17:36:19.674198Z","created_by":"osekkat","updated_at":"2026-02-17T18:04:35.476655Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["components","design-system","phase-b"],"dependencies":[{"issue_id":"bd-31h.5","depends_on_id":"bd-1xp.7","type":"blocks","created_at":"2026-02-17T18:04:35.476635Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-31h.5","depends_on_id":"bd-31h","type":"parent-child","created_at":"2026-02-17T17:36:19.674198Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-31h.5","depends_on_id":"bd-31h.2","type":"blocks","created_at":"2026-02-17T17:36:19.674198Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-32b","title":"Phase C: Content Pipeline Spike (De-risk Early)","description":"DE-RISK PHASE (PARALLEL TRACK): Content signing/verification and atomic updates are complex and failure-prone. This phase should run as early as possible after foundation setup, in parallel with design work, to surface high-risk failures early. Key deliverables: Content manifest schema with Ed25519 signing, signature verification with key rotation support, staged install with atomic activation, rollback mechanism. Why this order: if content updates fail, offline-first trust breaks. Technical: tweetnacl for Ed25519, expo-crypto for SHA-256, expo-file-system for atomic ops. Success: app verifies signatures, rejects tampered/replayed manifests, and safely rolls back on failures.","status":"open","priority":0,"issue_type":"epic","created_at":"2026-02-17T17:36:28.615979Z","created_by":"osekkat","updated_at":"2026-02-17T18:18:20.506146Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["content-pipeline","phase-c","security"],"dependencies":[{"issue_id":"bd-32b","depends_on_id":"bd-1xp","type":"blocks","created_at":"2026-02-17T18:18:16.250626Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-32b.1","title":"Define TypeScript types for content data models","description":"Create src/types/index.ts with all content types from plan.md: Locale, ISODateTime, OpeningHours, PlaceImage, PlaceBase, PlaceI18n, Place, PlaceCategory, DayTrip, Phrase, Itinerary, ItineraryDay, ItineraryStop, Pick, PickCategory, TipSection, ContentManifest. Use strict typing (no 'any'). Add Zod schemas that mirror each type for runtime validation. Export both TS types and Zod schemas. These types are the contract between content pipeline and app - must be exact.","status":"open","priority":0,"issue_type":"task","created_at":"2026-02-17T17:36:36.364372Z","created_by":"osekkat","updated_at":"2026-02-17T18:41:52.475Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["content-pipeline","phase-c","types"],"dependencies":[{"issue_id":"bd-32b.1","depends_on_id":"bd-1xp.5","type":"blocks","created_at":"2026-02-17T18:41:52.474979Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-32b.1","depends_on_id":"bd-32b","type":"parent-child","created_at":"2026-02-17T17:36:36.364372Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-32b.2","title":"Implement Ed25519 manifest signing and verification","description":"Install tweetnacl for Ed25519 operations. Create tools/content/sign-manifest.ts for build-time signing. Create src/sync/manifest.ts with verifyManifest() function. Implement: SHA-256 checksum of manifest payload, Ed25519 signature verification against pinned public key(s), support for key rotation (signingKeyIndex field), reject manifests with sequence <= last-applied (replay protection). App ships with primary + backup public keys. Write comprehensive tests for: valid signature, tampered payload, wrong key, replay attack.","status":"open","priority":0,"issue_type":"task","created_at":"2026-02-17T17:36:43.651029Z","created_by":"osekkat","updated_at":"2026-02-17T17:36:43.651029Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["content-pipeline","phase-c","security","signing"],"dependencies":[{"issue_id":"bd-32b.2","depends_on_id":"bd-32b","type":"parent-child","created_at":"2026-02-17T17:36:43.651029Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-32b.2","depends_on_id":"bd-32b.1","type":"blocks","created_at":"2026-02-17T17:36:43.651029Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-32b.3","title":"Implement staged install with atomic activation","description":"Create src/sync/installer.ts implementing the Content DB Activation Protocol from AGENTS.md: 1) Pause reads and close DB connections, 2) Stage new content in temp directory, 3) Atomic swap using expo-file-system.moveAsync(), 4) Reopen DB. Verify SHA-256 checksums of all packs before staging (packChecksums from manifest). Keep current + previous content versions for rollback. Handle interruption gracefully (incomplete downloads don't corrupt existing content). Test: successful swap, interrupted swap, checksum failure.","status":"open","priority":0,"issue_type":"task","created_at":"2026-02-17T17:36:51.480234Z","created_by":"osekkat","updated_at":"2026-02-17T17:36:51.480234Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["content-pipeline","phase-c","sync"],"dependencies":[{"issue_id":"bd-32b.3","depends_on_id":"bd-32b","type":"parent-child","created_at":"2026-02-17T17:36:51.480234Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-32b.3","depends_on_id":"bd-32b.2","type":"blocks","created_at":"2026-02-17T17:36:51.480234Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-32b.4","title":"Implement rollback mechanism for content updates","description":"Create src/sync/rollback.ts with rollbackToLastKnownGood() function. Keep previous content version in separate directory. On any failure during activation (validation, migration, corruption detection): automatically rollback to previous version. Log rollback events to crash reporter with context. Show user banner 'Using cached content' when in rollback state. Provide manual 'Retry Update' action. Test scenarios: corrupt new content, failed migration, partial download. This is the safety net - must be bulletproof.","status":"open","priority":0,"issue_type":"task","created_at":"2026-02-17T17:36:58.164390Z","created_by":"osekkat","updated_at":"2026-02-17T17:36:58.164390Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["content-pipeline","phase-c","reliability"],"dependencies":[{"issue_id":"bd-32b.4","depends_on_id":"bd-32b","type":"parent-child","created_at":"2026-02-17T17:36:58.164390Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-32b.4","depends_on_id":"bd-32b.3","type":"blocks","created_at":"2026-02-17T17:36:58.164390Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-32b.5","title":"Create build-time content validation tooling","description":"Create tools/content/validate.ts using Zod schemas: validate all JSON content against schemas, check unique IDs, verify coordinates are in Morocco region, ensure required lastVerifiedAt dates exist. Create tools/content/check-links.ts: verify all placeId references exist, check for missing images, ensure translation completeness per locale. Create tools/content/build-pack.ts: resize images to 400/800/1200w WebP, generate ThumbHash placeholders, bundle content JSON. These tools run in CI and catch content errors before they reach users.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T17:37:05.389585Z","created_by":"osekkat","updated_at":"2026-02-17T17:37:05.389585Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["content-pipeline","phase-c","tools"],"dependencies":[{"issue_id":"bd-32b.5","depends_on_id":"bd-32b","type":"parent-child","created_at":"2026-02-17T17:37:05.389585Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-32b.5","depends_on_id":"bd-32b.1","type":"blocks","created_at":"2026-02-17T17:37:05.389585Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-37m","title":"Phase G: Search & Discovery","description":"Build advanced search and discovery enhancements after core browsing exists. Key deliverables: FTS5 full-text search with BM25 ranking and typo-tolerant suggestions (recents, categories, did-you-mean). NOTE: open-now filtering and phrasebook were moved into Core UX because they directly support primary browsing/travel tasks. Technical: FTS5 with diacritic folding, locale-aware tokenization (including Arabic), curated synonyms via searchKeywords. Performance target: search P95 < 100ms. Success: users can quickly find relevant places even with imperfect queries.","status":"open","priority":1,"issue_type":"epic","created_at":"2026-02-17T17:40:18.013394Z","created_by":"osekkat","updated_at":"2026-02-17T18:19:30.199310Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["discovery","phase-g","search"],"dependencies":[{"issue_id":"bd-37m","depends_on_id":"bd-f2b","type":"blocks","created_at":"2026-02-17T17:40:18.013394Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-37m.1","title":"Implement FTS5 full-text search with BM25 ranking","description":"Create src/search/fts.ts implementing SearchService interface. Configure FTS5 with: BM25 ranking (tuned weights for name > description > tips > keywords), diacritic folding (cafe = caf√©), locale-aware tokenization. Build FTS index from places_i18n table. Support curated synonyms via searchKeywords field (e.g., 'riad' matches 'hotel', 'guesthouse'). Query must be P95 < 100ms. Test with Arabic, French, and English queries. Handle empty queries, special characters, very long queries gracefully.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T17:40:25.770291Z","created_by":"osekkat","updated_at":"2026-02-17T18:37:36.532398Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["fts","phase-g","search"],"dependencies":[{"issue_id":"bd-37m.1","depends_on_id":"bd-1vs.1","type":"blocks","created_at":"2026-02-17T18:36:25.739044Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-37m.1","depends_on_id":"bd-1vs.2","type":"blocks","created_at":"2026-02-17T18:36:25.706264Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-37m.1","depends_on_id":"bd-37m","type":"parent-child","created_at":"2026-02-17T17:40:25.770291Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-37m.1","depends_on_id":"bd-f2b.14","type":"blocks","created_at":"2026-02-17T18:37:36.532376Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-37m.2","title":"Implement search suggestions and did-you-mean","description":"Create src/search/suggest.ts. Implement suggestion sources: recent searches (persist locally), recently viewed places, category quick filters, 'Near Me' quick results. Implement 'Did you mean?' for typos: use edit distance on place names, show top 2-3 candidates. Suggestions must appear instantly as user types (debounced). Store recent searches in user.db (limit 20). Clear recent searches action in settings. No brittle full fuzzy matching - use targeted did-you-mean only. Test: typing 'bahia' suggests 'Bahia Palace', typo 'bahi' shows 'Did you mean: bahia'.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T17:40:33.987569Z","created_by":"osekkat","updated_at":"2026-02-17T17:40:33.987569Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["phase-g","search","suggestions"],"dependencies":[{"issue_id":"bd-37m.2","depends_on_id":"bd-37m","type":"parent-child","created_at":"2026-02-17T17:40:33.987569Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-37m.2","depends_on_id":"bd-37m.1","type":"blocks","created_at":"2026-02-17T17:40:33.987569Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-37m.3","title":"Implement open-now filter with real-time status","description":"Enhance places display with accurate open/closed status. Implement time-aware 'Open Now' filter for Explore and category listing screens. Parse opening hours from place data. Calculate open/closed/closing-soon (within 30min) status considering Morocco timezone. Add 'Open Now' toggle filter to Explore and category screens. Show status badge on PlaceCards (green 'Open', red 'Closed', yellow 'Closing Soon'). Handle places with no hours data gracefully ('Hours unknown'). Handle special cases: Ramadan hours, holidays. This is a PROGRESSIVE ENHANCEMENT - Explore/category screens must work before this exists; this adds the open-now intelligence.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T17:40:43.197980Z","created_by":"osekkat","updated_at":"2026-02-17T18:38:07.685386Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["explore","filters","phase-f"],"dependencies":[{"issue_id":"bd-37m.3","depends_on_id":"bd-1vs.2","type":"blocks","created_at":"2026-02-17T18:19:19.568585Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-37m.3","depends_on_id":"bd-f2b","type":"parent-child","created_at":"2026-02-17T18:02:26.954685Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-37m.3","depends_on_id":"bd-f2b.3","type":"blocks","created_at":"2026-02-17T18:19:19.549952Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-37m.4","title":"Implement Darija phrasebook","description":"Build app/phrasebook.tsx. NOTE: This is a CORE SCREEN, not a search feature - moved to Phase F. Categories: Greeting, Shopping, Directions, Food, Emergency, Transport, Courtesy. Each phrase shows: English, Darija (Arabic script), Darija Latin transliteration, French. Optional audio playback using bundled Opus clips (~2-5KB each). Category filtering. Simple search within phrases (doesn't need FTS5). Favorite phrases. 'Emergency' category always easily accessible and works offline. Quick access from Home (quick tools) and Tips. Large text option for showing to locals. Copy phrase to clipboard. Arabic RTL rendering must work correctly.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T17:40:52.350733Z","created_by":"osekkat","updated_at":"2026-02-17T18:19:19.629949Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["phase-f","phrasebook","screens"],"dependencies":[{"issue_id":"bd-37m.4","depends_on_id":"bd-1vs.2","type":"blocks","created_at":"2026-02-17T18:19:19.629928Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-37m.4","depends_on_id":"bd-31h.3","type":"blocks","created_at":"2026-02-17T18:19:19.591084Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-37m.4","depends_on_id":"bd-31h.4","type":"blocks","created_at":"2026-02-17T18:19:19.612338Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-37m.4","depends_on_id":"bd-31h.5","type":"blocks","created_at":"2026-02-17T18:01:56.303405Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-37m.4","depends_on_id":"bd-f2b","type":"parent-child","created_at":"2026-02-17T18:00:31.334616Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-37m.5","title":"Implement offline A* pedestrian routing","description":"MOVED TO PHASE E (MAPS): Offline routing belongs with maps infrastructure, not search. Create src/routing/graph.ts: load downloadable pedestrian routing graph per zone. Create src/routing/astar.ts: A* pathfinding algorithm optimized for Medina's complex alleyways. Create src/routing/instructions.ts: generate simple turn hints ('Turn left', 'Continue straight', 'Destination on right'). Route polyline overlay on map. 'Off route' detection (user strays >50m). Outside downloaded zones: fallback to bearing/waypoint guidance (clearly labeled approximate). Routing graphs stored separately from map tiles in Downloads. Test extensively in Medina's narrow passages.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T17:41:00.618980Z","created_by":"osekkat","updated_at":"2026-02-17T18:39:26.939892Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["maps","offline","phase-e","routing"],"dependencies":[{"issue_id":"bd-37m.5","depends_on_id":"bd-3u5","type":"parent-child","created_at":"2026-02-17T18:39:26.939880Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-37m.5","depends_on_id":"bd-3u5.2","type":"blocks","created_at":"2026-02-17T18:01:19.645888Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-37m.5","depends_on_id":"bd-3u5.6","type":"blocks","created_at":"2026-02-17T18:03:20.478226Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-37m.6","title":"Add 'Near Me' location features to Explore","description":"Add location-aware features to Explore and category screens. Implement 'Near Me' quick filter using GeoEngine + location permission. When user taps 'Near Me': request location permission (with pre-permission explanation), show places within 500m radius sorted by distance. Add distance badge to PlaceCards ('250m away'). Add 'Sort by distance' option when location is available. Graceful fallback: if location denied or unavailable, disable 'Near Me' chip with subtle message, hide distance sorting option. Battery-safe: request location once on filter tap, cache for 5 minutes. Uses haversine from GeoEngine.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T18:38:40.662087Z","created_by":"osekkat","updated_at":"2026-02-17T18:38:43.981616Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["explore","location","phase-g","screens"],"dependencies":[{"issue_id":"bd-37m.6","depends_on_id":"bd-37m","type":"parent-child","created_at":"2026-02-17T18:38:40.662087Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-37m.6","depends_on_id":"bd-3u5.4","type":"blocks","created_at":"2026-02-17T18:38:43.981596Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-37m.6","depends_on_id":"bd-3u5.6","type":"blocks","created_at":"2026-02-17T18:38:43.955639Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-37m.6","depends_on_id":"bd-f2b.3","type":"blocks","created_at":"2026-02-17T18:38:43.927141Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-3u5","title":"Phase E: Maps Integration (De-risk Early)","description":"DE-RISK PHASE: Mapbox integration with offline tiles is complex and a core feature. Spiking early reveals issues before UX depends on it. Key deliverables: @rnmapbox/maps integration, offline tile packs (Medina Core, City Center, Full City), download manager with pause/resume, POI markers with clustering. Why early: Maps are visually prominent and offline tiles are large downloads - both need careful handling. Technical: Mapbox SDK offline manager, expo-file-system for storage, marker clustering at low zoom. Success: Map renders offline with downloaded tiles, markers cluster properly.","status":"open","priority":0,"issue_type":"epic","created_at":"2026-02-17T17:38:07.499711Z","created_by":"osekkat","updated_at":"2026-02-17T17:38:07.499711Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["maps","offline","phase-e"],"dependencies":[{"issue_id":"bd-3u5","depends_on_id":"bd-1vs","type":"blocks","created_at":"2026-02-17T17:38:07.499711Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-3u5.1","title":"Integrate @rnmapbox/maps with Expo","description":"Install @rnmapbox/maps v10+. Configure Mapbox access token in app.json (use environment variable, never commit token). Create src/components/maps/MapView.tsx wrapper component. Configure map style (streets or custom Moroccan-themed style). Center default view on Marrakech Medina (31.6295, -7.9811). Add basic interactivity: zoom, pan, rotation. Test on both iOS and Android simulators. Handle MapView errors gracefully (network issues, token problems). This is the foundation - all map features build on it.","status":"open","priority":0,"issue_type":"task","created_at":"2026-02-17T17:38:15.432891Z","created_by":"osekkat","updated_at":"2026-02-17T18:39:57.321397Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["mapbox","maps","phase-e"],"dependencies":[{"issue_id":"bd-3u5.1","depends_on_id":"bd-1xp.5","type":"blocks","created_at":"2026-02-17T18:39:57.321375Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-3u5.1","depends_on_id":"bd-3u5","type":"parent-child","created_at":"2026-02-17T17:38:15.432891Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-3u5.2","title":"Implement offline map tile pack downloads","description":"Create src/services/maps.ts with offline pack management using Mapbox SDK offline manager. Define pack zones: Medina Core (zoom 14-18, ~50MB), City Center (zoom 12-18, ~100MB), Full City (zoom 10-18, ~200MB). Show size estimates before download. Implement download with progress tracking. Store packs using expo-file-system (exclude from backups). Implement pause/resume/cancel. Handle low-storage scenarios (preflight check + warning). Persist pack state across app restarts. Test: download pack, enable airplane mode, verify map renders offline.","status":"open","priority":0,"issue_type":"task","created_at":"2026-02-17T17:38:22.305580Z","created_by":"osekkat","updated_at":"2026-02-17T17:38:22.305580Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["maps","offline","phase-e"],"dependencies":[{"issue_id":"bd-3u5.2","depends_on_id":"bd-3u5","type":"parent-child","created_at":"2026-02-17T17:38:22.305580Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-3u5.2","depends_on_id":"bd-3u5.1","type":"blocks","created_at":"2026-02-17T17:38:22.305580Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-3u5.3","title":"Implement POI markers with clustering","description":"Create src/components/maps/Marker.tsx for individual POI markers. Color-code markers by category using theme colors. Create src/components/maps/MarkerCluster.tsx for clustering at low zoom levels. Use Mapbox's native clustering or implement client-side clustering. Show cluster count. On cluster tap: zoom to expand cluster. On marker tap: show place preview card (name, category, image thumbnail). Implement marker budget to prevent performance issues (max ~100 visible markers, use clustering beyond). Markers must be accessible as list alternative for screen readers.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T17:38:29.572946Z","created_by":"osekkat","updated_at":"2026-02-17T18:03:20.497665Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["maps","markers","phase-e"],"dependencies":[{"issue_id":"bd-3u5.3","depends_on_id":"bd-3u5","type":"parent-child","created_at":"2026-02-17T17:38:29.572946Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-3u5.3","depends_on_id":"bd-3u5.1","type":"blocks","created_at":"2026-02-17T17:38:29.572946Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-3u5.3","depends_on_id":"bd-3u5.6","type":"blocks","created_at":"2026-02-17T18:03:20.497644Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-3u5.4","title":"Implement current location with battery-safe permissions","description":"Install expo-location. Create src/hooks/useLocation.ts following AGENTS.md Location & Permissions rules: request foreground-only permission, show pre-permission explanation, balanced accuracy (not high), throttle updates to 10-20Hz, safety timeout, denial path keeps app usable. Show current location indicator on map. Add 'Refresh location' manual button. Request location ONLY while maps/navigation screen visible. Test: grant permission shows location, deny permission app still works, location stops when leaving screen.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T17:38:37.010471Z","created_by":"osekkat","updated_at":"2026-02-17T17:38:37.010471Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["location","maps","phase-e"],"dependencies":[{"issue_id":"bd-3u5.4","depends_on_id":"bd-3u5","type":"parent-child","created_at":"2026-02-17T17:38:37.010471Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-3u5.4","depends_on_id":"bd-3u5.1","type":"blocks","created_at":"2026-02-17T17:38:37.010471Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-3u5.5","title":"Create Downloads screen for map pack management","description":"CRITICAL FOR OFFLINE UX: This is how users get offline capabilities. Create app/downloads.tsx (accessible from Maps tab and Settings). Display all available packs: name, size estimate, status (Not downloaded / Downloading / Ready). Show download progress with percentage and bytes. Implement determinate progress bar per plan.md UX standards. Per-pack controls: Download / Pause / Resume / Cancel / Delete. Wi-Fi-only toggle with cellular confirmation for large packs. Free space check before download. Storage usage summary. State persists across app restarts/process death. This screen makes offline-first tangible to users.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T17:38:44.005236Z","created_by":"osekkat","updated_at":"2026-02-17T18:39:20.102139Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["downloads","maps","phase-e"],"dependencies":[{"issue_id":"bd-3u5.5","depends_on_id":"bd-31h.5","type":"blocks","created_at":"2026-02-17T18:39:20.102117Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-3u5.5","depends_on_id":"bd-3u5","type":"parent-child","created_at":"2026-02-17T17:38:44.005236Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-3u5.5","depends_on_id":"bd-3u5.2","type":"blocks","created_at":"2026-02-17T17:38:44.005236Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-3u5.6","title":"Implement GeoEngine utilities","description":"Create src/utils/geo.ts with essential geospatial functions. haversine(point1, point2): distance in meters. bearing(from, to): direction in degrees. isWithinBounds(point, bounds): check if coordinate within bounding box. formatDistance(meters): '200m', '1.2 km'. These utilities power: 'Near Me' sorting in Explore, route distance calculation, POI clustering on maps, 'off route' detection. All operations run offline using basic trigonometry - no external API calls. Include unit tests with known coordinates. Keep dependency-free for maximum performance.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T18:03:16.637073Z","created_by":"osekkat","updated_at":"2026-02-17T18:40:00.011154Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["geo","maps","phase-e","utils"],"dependencies":[{"issue_id":"bd-3u5.6","depends_on_id":"bd-1xp.5","type":"blocks","created_at":"2026-02-17T18:40:00.011132Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-3u5.6","depends_on_id":"bd-3u5","type":"parent-child","created_at":"2026-02-17T18:03:16.637073Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-8es","title":"Phase H: Planner, My Trip & Sharing","description":"Build features for trip organization and user-generated planning data. Key deliverables: My Trip screen (favorites display, notes, checklists), notes system, issue reporting with offline queue, sharing/deep links for saved plans. NOTE: Favorites moved earlier into core browsing flow; Emergency Mode moved earlier for safety-critical access. Sequencing: this phase should start after Core UX Screens, not after Search, so users can begin planning/saving even before advanced search enhancements are complete. Success: users can organize trip materials, personalize plans, and share/export useful trip context.","status":"open","priority":1,"issue_type":"epic","created_at":"2026-02-17T17:41:09.112970Z","created_by":"osekkat","updated_at":"2026-02-17T18:21:47.161321Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["phase-h","planner","sharing","user-data"],"dependencies":[{"issue_id":"bd-8es","depends_on_id":"bd-f2b","type":"blocks","created_at":"2026-02-17T18:18:31.834552Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-8es.1","title":"Implement favorites system","description":"MOVED TO PHASE F: Users need favorites while browsing, not after. Create src/user/favorites.ts with CRUD operations for favorites (stored in user.db). Support content_types: place, itinerary, pick, phrase. Create useFavorites hook. Add heart icon toggle to all place cards, itinerary cards, pick cards. Sync UI state immediately (optimistic update). Persist to SQLite (survives content updates). Show favorites count in My Trip header icon. Allow unfavoriting. Handle edge case: favorited item removed from content (show 'No longer available' state). This enables the 'save it for later' behavior critical for trip planning.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T17:41:16.383702Z","created_by":"osekkat","updated_at":"2026-02-17T18:38:50.997099Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["favorites","phase-f","user-data"],"dependencies":[{"issue_id":"bd-8es.1","depends_on_id":"bd-1vs.1","type":"blocks","created_at":"2026-02-17T18:38:50.997077Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-8es.1","depends_on_id":"bd-f2b","type":"parent-child","created_at":"2026-02-17T18:00:52.587418Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-8es.2","title":"Implement notes and checklists","description":"Create src/user/notes.ts for notes attached to places/itineraries. Stored in user.db notes table. Create src/user/checklist.ts for standalone checklist items (packing list, to-do). Create My Trip section for notes: view all notes, edit inline, delete. Create checklist UI: add item, toggle complete, reorder (drag), delete. Persist all changes immediately. Export notes + checklist as text. Import not required initially. Test: create notes on places, check items off, app restart preserves data.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T17:41:23.390845Z","created_by":"osekkat","updated_at":"2026-02-17T18:38:54.023037Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["notes","phase-h","user-data"],"dependencies":[{"issue_id":"bd-8es.2","depends_on_id":"bd-1vs.1","type":"blocks","created_at":"2026-02-17T18:38:54.023016Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-8es.2","depends_on_id":"bd-8es","type":"parent-child","created_at":"2026-02-17T17:41:23.390845Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-8es.3","title":"Implement My Trip screen","description":"Build app/my-trip.tsx (accessible via header icon from all tabs). Sections: Saved Places (favorites), Saved Itineraries, Notes, Checklist. Each section expandable/collapsible. Saved items show place cards (tappable to detail). Notes show attached place + note text (editable). Checklist shows items with checkboxes. Export all as formatted text (share sheet). Clear all action (with confirmation). Empty states with helpful prompts. Quick actions: add note, add checklist item. Consistent entry point from all tabs via header icon.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T17:41:30.707895Z","created_by":"osekkat","updated_at":"2026-02-17T18:19:41.125287Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["my-trip","phase-h","user-data"],"dependencies":[{"issue_id":"bd-8es.3","depends_on_id":"bd-8es","type":"parent-child","created_at":"2026-02-17T17:41:30.707895Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-8es.3","depends_on_id":"bd-8es.1","type":"blocks","created_at":"2026-02-17T18:03:35.924892Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-8es.3","depends_on_id":"bd-8es.2","type":"blocks","created_at":"2026-02-17T17:41:30.707895Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-8es.4","title":"Implement Emergency Mode","description":"CRITICAL SAFETY - THIS MUST WORK INDEPENDENTLY. Emergency Mode is a self-contained module with NO external dependencies beyond navigation shell and basic UI. Create Emergency Mode bottom sheet accessible from all tabs (persistent floating action button or similar persistent CTA). One-handed reachable on all device sizes. Contents: one-tap call shortcuts (police 19, ambulance 15, fire 15, tourist police), copy-to-clipboard for addresses/numbers, offline phrase cards for critical scenarios (lost passport, need doctor, theft), 'Share my location' SMS/WhatsApp templates. MUST work OFFLINE with NO content DB - ALL emergency data is HARDCODED. This module does NOT integrate with degradation tiers - it works even when everything else fails. Test: Force-crash app mid-use, restart, Emergency Mode still works.","status":"open","priority":0,"issue_type":"task","created_at":"2026-02-17T17:41:38.463331Z","created_by":"osekkat","updated_at":"2026-02-17T18:41:24.292134Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["critical","phase-b","safety"],"dependencies":[{"issue_id":"bd-8es.4","depends_on_id":"bd-1xp.2","type":"blocks","created_at":"2026-02-17T18:41:11.369731Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-8es.4","depends_on_id":"bd-31h","type":"parent-child","created_at":"2026-02-17T18:41:24.292120Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-8es.4","depends_on_id":"bd-31h.5","type":"blocks","created_at":"2026-02-17T18:01:07.408582Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-8es.5","title":"Implement issue reporting with offline queue","description":"Create src/user/reports.ts for user-submitted issue reports. Report types: incorrect info, permanently closed, outdated, other. Store in user.db issue_reports table with synced=0 flag. UI: tap freshness indicator or dedicated 'Report Issue' button on place detail. Form: select report type, optional details text. Queue reports offline. On connectivity: upload queued reports to backend endpoint. Mark synced=1 on success. Retry with backoff on failure. Show pending report count in Settings/Diagnostics. Privacy: no personal data sent without consent.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-17T17:41:46.253447Z","created_by":"osekkat","updated_at":"2026-02-17T18:38:57.148498Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["phase-h","reports","user-data"],"dependencies":[{"issue_id":"bd-8es.5","depends_on_id":"bd-1vs.1","type":"blocks","created_at":"2026-02-17T18:38:57.148476Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-8es.5","depends_on_id":"bd-8es","type":"parent-child","created_at":"2026-02-17T17:41:46.253447Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-8es.5","depends_on_id":"bd-f2b.6","type":"blocks","created_at":"2026-02-17T18:19:56.359291Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-8es.6","title":"Implement sharing and deep links","description":"Configure expo-linking for universal links. URL scheme: https://marrakechcompass.app/place/{slug}, https://marrakechcompass.app/itinerary/{id}. Place/itinerary detail screens include Share button. Share sheet generates universal link + name + one-line description + hero image thumbnail. If recipient has app: opens directly to detail screen. If not: falls back to static web preview page (future CDN hosting). Configure app.json with associated domains. Handle incoming deep links in root layout. Test: share place, open link with app installed vs not installed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-17T17:41:54.107952Z","created_by":"osekkat","updated_at":"2026-02-17T18:19:56.436471Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["deep-links","phase-h","sharing"],"dependencies":[{"issue_id":"bd-8es.6","depends_on_id":"bd-8es","type":"parent-child","created_at":"2026-02-17T17:41:54.107952Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-8es.6","depends_on_id":"bd-f2b.6","type":"blocks","created_at":"2026-02-17T18:19:56.415806Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-8es.6","depends_on_id":"bd-f2b.7","type":"blocks","created_at":"2026-02-17T18:19:56.436451Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-f2b","title":"Phase F: Core UX Screens","description":"Build the main user-facing screens. This is where the product vision comes to life. Key deliverables: Home/Plan Your Trip with weather widget, Explore with category browsing, Tips with accordion sections, place/itinerary/day-trip detail screens, image loading with ThumbHash placeholders. Design philosophy: Moroccan-inspired visual identity, skeleton placeholders (no blank screens), smooth animations, editorial quality. Sequencing: this phase depends on Data Core and Design System, but should NOT wait on full maps pipeline; only map-specific screens/features should block on map tasks. Success: user can browse core content quickly while map work continues in parallel.","status":"open","priority":1,"issue_type":"epic","created_at":"2026-02-17T17:38:52.911056Z","created_by":"osekkat","updated_at":"2026-02-17T18:18:28.352049Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["phase-f","screens","ux"],"dependencies":[{"issue_id":"bd-f2b","depends_on_id":"bd-1vs","type":"blocks","created_at":"2026-02-17T18:18:23.875234Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-f2b.1","title":"Implement Home tab with Plan Your Trip","description":"Build app/(tabs)/index.tsx (Home tab). Hero section: beautiful image with gradient overlay, weather widget (Open-Meteo API with offline cache), language switcher in header. Plan Your Trip: duration selector chips (1 Day, Weekend, Long Weekend, 1 Week), itinerary cards with expand/collapse animation, day-by-day breakdown, bookmark button. Arrival Mode quick tools: airport info, first steps checklist, emergency contacts quick access, currency converter, prayer times, phrasebook link. Don't Miss carousel: horizontal scroll of featured highlights. All data from repository.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T17:39:00.510660Z","created_by":"osekkat","updated_at":"2026-02-17T18:36:33.324131Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["home","phase-f","screens"],"dependencies":[{"issue_id":"bd-f2b.1","depends_on_id":"bd-1vs.2","type":"blocks","created_at":"2026-02-17T18:36:33.324111Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.1","depends_on_id":"bd-31h.5","type":"blocks","created_at":"2026-02-17T18:01:51.196146Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.1","depends_on_id":"bd-f2b","type":"parent-child","created_at":"2026-02-17T17:39:00.510660Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.1","depends_on_id":"bd-f2b.12","type":"blocks","created_at":"2026-02-17T18:01:41.008843Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.1","depends_on_id":"bd-f2b.13","type":"blocks","created_at":"2026-02-17T18:20:36.916551Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.1","depends_on_id":"bd-f2b.9","type":"blocks","created_at":"2026-02-17T18:01:51.217105Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-f2b.10","title":"Implement Settings screen","description":"Build app/settings.tsx as an early user-control surface (language, theme, accessibility, data usage). Core sections: Language Selection (7 locales, AR triggers RTL), Theme (System/Light/Dark), Accessibility (text size, reduce motion, high contrast), Data Usage Mode (Wi-Fi-only downloads, image quality), Safety Center shortcuts, and About. Maps/Diagnostics subsections should be progressive enhancements: show available status when map/download and diagnostics features exist, otherwise show clear placeholders/links. This keeps settings useful early while allowing deeper controls to arrive incrementally.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T17:40:10.007327Z","created_by":"osekkat","updated_at":"2026-02-17T18:21:20.407413Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["phase-f","screens","settings"],"dependencies":[{"issue_id":"bd-f2b.10","depends_on_id":"bd-1vs.6","type":"blocks","created_at":"2026-02-17T18:19:22.535286Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.10","depends_on_id":"bd-31h.3","type":"blocks","created_at":"2026-02-17T18:19:22.514919Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.10","depends_on_id":"bd-31h.5","type":"blocks","created_at":"2026-02-17T18:01:56.238610Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.10","depends_on_id":"bd-f2b","type":"parent-child","created_at":"2026-02-17T17:40:10.007327Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.10","depends_on_id":"bd-f2b.13","type":"blocks","created_at":"2026-02-17T18:20:42.824108Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-f2b.11","title":"Implement day trip detail screen","description":"Build app/day-trip/[id].tsx for day trips from Marrakech (Atlas Mountains, Essaouira, Ouzoud Falls). Hero image, title, travel time from Marrakech. Transport options section: private car, shared minibus, bus, organized tour with estimated costs in DH. Best months to visit (visual calendar). Packing tips checklist. Highlights with optional placeId links. Warnings section for safety/preparation notes. Map showing route from Marrakech. Share and Save buttons. lastVerifiedAt freshness indicator. This is distinct from regular place detail due to travel logistics content.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T18:01:28.764120Z","created_by":"osekkat","updated_at":"2026-02-17T18:37:52.510211Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["detail","phase-f","screens"],"dependencies":[{"issue_id":"bd-f2b.11","depends_on_id":"bd-1vs.2","type":"blocks","created_at":"2026-02-17T18:36:29.770705Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.11","depends_on_id":"bd-31h.5","type":"blocks","created_at":"2026-02-17T18:01:56.261963Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.11","depends_on_id":"bd-3u5.1","type":"blocks","created_at":"2026-02-17T18:37:52.510189Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.11","depends_on_id":"bd-f2b","type":"parent-child","created_at":"2026-02-17T18:01:28.764120Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.11","depends_on_id":"bd-f2b.13","type":"blocks","created_at":"2026-02-17T18:20:42.887773Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.11","depends_on_id":"bd-f2b.9","type":"blocks","created_at":"2026-02-17T18:01:56.282796Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-f2b.12","title":"Implement weather service with offline caching","description":"Create src/services/weather.ts for Open-Meteo API integration. Fetch current conditions and 3-day forecast for Marrakech. Implement aggressive offline caching: cache for 3 hours when online, serve stale data indefinitely when offline with 'Last updated X ago' indicator. Display: temperature, conditions icon, humidity, high/low for today. Handle API errors gracefully (show cached data or 'Weather unavailable'). No API key required (Open-Meteo is free). Respect data usage mode (skip fetch on cellular if user prefers). This powers the Home screen hero weather widget.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T18:01:37.042042Z","created_by":"osekkat","updated_at":"2026-02-17T18:19:48.001727Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["phase-f","services","weather"],"dependencies":[{"issue_id":"bd-f2b.12","depends_on_id":"bd-1vs.6","type":"blocks","created_at":"2026-02-17T18:19:47.981011Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.12","depends_on_id":"bd-31h.3","type":"blocks","created_at":"2026-02-17T18:19:48.001702Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.12","depends_on_id":"bd-f2b","type":"parent-child","created_at":"2026-02-17T18:01:37.042042Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-f2b.13","title":"Standardize loading/offline/error states across core screens","description":"Create reusable screen-state primitives so every tab follows the same UX contract from AGENTS.md: loading (skeletons), content, refreshing (subtle progress), offline (clear 'what still works' messaging), error (actionable retry paths). Implement shared components/hooks in src/components/ui and src/hooks to avoid one-off per-screen logic. Ensure no blank screens, no blocking spinners for long operations, and explicit recovery actions if operation >10s. Apply pattern to Home, Picks, Explore, Maps, and Tips first, then detail screens. This directly improves trust and usability in low-connectivity travel scenarios.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T18:20:32.019123Z","created_by":"osekkat","updated_at":"2026-02-17T18:20:36.815487Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["phase-f","screens","states","ux"],"dependencies":[{"issue_id":"bd-f2b.13","depends_on_id":"bd-1vs.5","type":"blocks","created_at":"2026-02-17T18:20:36.815464Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.13","depends_on_id":"bd-31h.5","type":"blocks","created_at":"2026-02-17T18:20:36.793236Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.13","depends_on_id":"bd-f2b","type":"parent-child","created_at":"2026-02-17T18:20:32.019123Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-f2b.14","title":"Add search bar to Explore tab","description":"Add search input to Explore tab header for quick place discovery. Basic implementation: filter places by name/description as user types (uses existing repository queries, not FTS5). Debounce input (300ms). Show search results inline replacing category grid. Clear button to return to category view. Search icon affordance. Placeholder text: 'Search places...'. This provides basic search before FTS5 is ready (Phase G). When FTS5 is available later, the search can be upgraded to use it. Ensure keyboard behavior is correct (dismiss on scroll, submit on enter).","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T18:37:27.763876Z","created_by":"osekkat","updated_at":"2026-02-17T18:37:32.029958Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["explore","phase-f","screens","search"],"dependencies":[{"issue_id":"bd-f2b.14","depends_on_id":"bd-1vs.2","type":"blocks","created_at":"2026-02-17T18:37:32.029934Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.14","depends_on_id":"bd-f2b","type":"parent-child","created_at":"2026-02-17T18:37:27.763876Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.14","depends_on_id":"bd-f2b.3","type":"blocks","created_at":"2026-02-17T18:37:32.006171Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-f2b.2","title":"Implement Our Picks (Coup de Coeur) tab","description":"Build app/(tabs)/picks.tsx. Editorial-style curated recommendations organized by category: Best Architectural Experience, Best Djemaa El Fna Experience, Best Shopping/Souks, Best Dining, Best Place to Stay, Best Hidden Gem, Best Rooftop View, Best Art & Design, Best Cultural Experiences, Best Museum, Best New Town (Gueliz), Best Hammam. Each pick shows: rich hero imagery, 'Why We Love It' editorial description, practical tips, tap to view full place detail. Content freshness indicator (badge based on lastVerifiedAt). Tap badge to submit correction report.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T17:39:07.375028Z","created_by":"osekkat","updated_at":"2026-02-17T18:20:37.003274Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["phase-f","picks","screens"],"dependencies":[{"issue_id":"bd-f2b.2","depends_on_id":"bd-1vs.2","type":"blocks","created_at":"2026-02-17T18:02:04.647951Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.2","depends_on_id":"bd-31h.5","type":"blocks","created_at":"2026-02-17T18:01:51.239726Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.2","depends_on_id":"bd-f2b","type":"parent-child","created_at":"2026-02-17T17:39:07.375028Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.2","depends_on_id":"bd-f2b.13","type":"blocks","created_at":"2026-02-17T18:20:37.003248Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.2","depends_on_id":"bd-f2b.9","type":"blocks","created_at":"2026-02-17T18:01:51.264544Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-f2b.3","title":"Implement Explore tab with category browsing","description":"Build app/(tabs)/explore.tsx. Category grid: Restaurants & Cafes, Museums & Galleries, Riads & Hotels, Gardens & Courtyards, Shopping & Souks, Hammams & Spas, Day Trips. Neighborhood quick filters (horizontal chips): Medina, Gueliz, Hivernage, Mellah, Palmeraie, All. Place cards: image with ThumbHash placeholder, name, category badge, rating, price range, heart icon for favorites. Cards use FlashList for performance. Filter by: neighborhood, price, rating. Sort options (rating, name). Tap card for detail screen. PROGRESSIVE ENHANCEMENTS (added later): 'Near Me' filter (needs GeoEngine + location), open-now toggle (needs bd-37m.3), distance sorting (needs GeoEngine).","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T17:39:14.685378Z","created_by":"osekkat","updated_at":"2026-02-17T18:38:32.375650Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["explore","phase-f","screens"],"dependencies":[{"issue_id":"bd-f2b.3","depends_on_id":"bd-1vs.2","type":"blocks","created_at":"2026-02-17T18:02:14.967702Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.3","depends_on_id":"bd-31h.5","type":"blocks","created_at":"2026-02-17T18:01:51.286775Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.3","depends_on_id":"bd-f2b","type":"parent-child","created_at":"2026-02-17T17:39:14.685378Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.3","depends_on_id":"bd-f2b.13","type":"blocks","created_at":"2026-02-17T18:20:37.029284Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.3","depends_on_id":"bd-f2b.9","type":"blocks","created_at":"2026-02-17T18:01:51.307983Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-f2b.4","title":"Implement Tips tab with accordion sections","description":"Build app/(tabs)/tips.tsx. Expandable accordion sections with icons for: Getting Around, Language, Etiquette & Customs, Climate & Packing, Bargaining Guide, SIM Cards & WiFi, Food Drink & Nightlife, Accommodation, Health & Safe Travels, Money & Tipping, Family Travel, LGBTIQ+ Travellers, Accessible Travel, Responsible Travel, Nuts & Bolts, Scams & Incident Response. Each section: icon, title, expandable content, lastReviewedAt stamp. safetyLevel styling (general/important/critical). Emergency Mode action always visible/reachable (bottom sheet CTA).","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T17:39:21.869813Z","created_by":"osekkat","updated_at":"2026-02-17T18:36:12.684601Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["phase-f","screens","tips"],"dependencies":[{"issue_id":"bd-f2b.4","depends_on_id":"bd-1vs.2","type":"blocks","created_at":"2026-02-17T18:36:12.684427Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.4","depends_on_id":"bd-31h.5","type":"blocks","created_at":"2026-02-17T18:01:51.328764Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.4","depends_on_id":"bd-f2b","type":"parent-child","created_at":"2026-02-17T17:39:21.869813Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.4","depends_on_id":"bd-f2b.13","type":"blocks","created_at":"2026-02-17T18:20:37.053499Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.4","depends_on_id":"bd-f2b.9","type":"blocks","created_at":"2026-02-17T18:01:51.349013Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-f2b.5","title":"Implement Maps tab full-screen experience","description":"Build app/(tabs)/maps.tsx using MapView component from Phase E. Full-screen map centered on Marrakech Medina. POI markers from repository (color-coded by category). Search places on map. Current location indicator (if permission granted). Recenter button. Layer toggle (streets/satellite). Offline indicator showing pack status. Link to Downloads screen. Place preview card on marker tap. Basic online routing directions (Mapbox Directions API). Ensure smooth scroll/zoom (55+ FPS). Handle offline gracefully with clear messaging.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T17:39:30.674702Z","created_by":"osekkat","updated_at":"2026-02-17T18:36:21.691804Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["maps-tab","phase-f","screens"],"dependencies":[{"issue_id":"bd-f2b.5","depends_on_id":"bd-1vs.2","type":"blocks","created_at":"2026-02-17T18:36:21.691784Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.5","depends_on_id":"bd-31h.5","type":"blocks","created_at":"2026-02-17T18:01:51.370625Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.5","depends_on_id":"bd-3u5.1","type":"blocks","created_at":"2026-02-17T18:02:00.050628Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.5","depends_on_id":"bd-3u5.3","type":"blocks","created_at":"2026-02-17T18:36:16.995897Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.5","depends_on_id":"bd-f2b","type":"parent-child","created_at":"2026-02-17T17:39:30.674702Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.5","depends_on_id":"bd-f2b.13","type":"blocks","created_at":"2026-02-17T18:20:37.124621Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.5","depends_on_id":"bd-f2b.9","type":"blocks","created_at":"2026-02-17T18:01:51.392019Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-f2b.6","title":"Implement place detail screen","description":"Build app/place/[id].tsx. Hero image gallery with ThumbHash placeholders, swipe between images. Place name, category badge, neighborhood, rating, price range. Open/closed status with hours. Full description (localized). Tips section. Contact info (address, phone, website). Map preview with 'View on Map' CTA. 'Get Directions' button. Share button (universal link). Save to favorites button. Report issue button. Accessibility tags if present. lastVerifiedAt freshness indicator. All content from repository by ID. Handle missing/invalid ID gracefully.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T17:39:40.776897Z","created_by":"osekkat","updated_at":"2026-02-17T18:37:46.080268Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["detail","phase-f","screens"],"dependencies":[{"issue_id":"bd-f2b.6","depends_on_id":"bd-1vs.2","type":"blocks","created_at":"2026-02-17T18:02:04.585246Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.6","depends_on_id":"bd-31h.5","type":"blocks","created_at":"2026-02-17T18:01:51.412601Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.6","depends_on_id":"bd-3u5.1","type":"blocks","created_at":"2026-02-17T18:37:46.080242Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.6","depends_on_id":"bd-f2b","type":"parent-child","created_at":"2026-02-17T17:39:40.776897Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.6","depends_on_id":"bd-f2b.13","type":"blocks","created_at":"2026-02-17T18:20:42.723889Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.6","depends_on_id":"bd-f2b.9","type":"blocks","created_at":"2026-02-17T18:01:51.434118Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-f2b.7","title":"Implement itinerary detail screen","description":"Build app/itinerary/[id].tsx for curated trip plans. Hero image, title, duration badge (1 Day/Weekend/Long Weekend/1 Week), editorial description explaining the itinerary theme. Day-by-day breakdown: each day expandable showing all stops in sequence. Each stop shows: suggested time slot, place card (tappable to place detail), editorial notes for that stop. Map preview showing all stops as numbered markers with walking route line between them. 'Start This Itinerary' CTA that highlights today's first stop. Save entire itinerary to My Trip. Share button (universal link). Day navigation (Next Day / Previous Day or swipe gestures). All content from repository. Works well for both short (1-day) and long (7-day) itineraries.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T17:39:49.664847Z","created_by":"osekkat","updated_at":"2026-02-17T18:37:49.711380Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["detail","phase-f","screens"],"dependencies":[{"issue_id":"bd-f2b.7","depends_on_id":"bd-1vs.2","type":"blocks","created_at":"2026-02-17T18:02:04.607902Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.7","depends_on_id":"bd-31h.5","type":"blocks","created_at":"2026-02-17T18:01:51.455003Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.7","depends_on_id":"bd-3u5.1","type":"blocks","created_at":"2026-02-17T18:37:49.711359Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.7","depends_on_id":"bd-f2b","type":"parent-child","created_at":"2026-02-17T17:39:49.664847Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.7","depends_on_id":"bd-f2b.13","type":"blocks","created_at":"2026-02-17T18:20:42.750647Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.7","depends_on_id":"bd-f2b.9","type":"blocks","created_at":"2026-02-17T18:01:51.477288Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-f2b.8","title":"Implement category listing screen","description":"Build app/category/[slug].tsx for category drill-down. Show all places in a category (e.g., /category/restaurant). Header with category icon, name, and place count. FlashList of PlaceCards with same styling as Explore. Neighborhood quick filters (horizontal chips). Sort options (rating, distance if location available, name). Filter by price range, open-now status. Empty state with helpful messaging if no places match filters. Link to 'View on Map' for this category's places. Ensure good scroll performance with many items (100+ places). Back navigation to Explore. Deep-linkable for sharing.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T17:39:55.872728Z","created_by":"osekkat","updated_at":"2026-02-17T18:36:52.953481Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["category","phase-f","screens"],"dependencies":[{"issue_id":"bd-f2b.8","depends_on_id":"bd-1vs.2","type":"blocks","created_at":"2026-02-17T18:02:04.628768Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.8","depends_on_id":"bd-31h.5","type":"blocks","created_at":"2026-02-17T18:01:51.498689Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.8","depends_on_id":"bd-f2b","type":"parent-child","created_at":"2026-02-17T17:39:55.872728Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.8","depends_on_id":"bd-f2b.13","type":"blocks","created_at":"2026-02-17T18:20:42.804686Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.8","depends_on_id":"bd-f2b.9","type":"blocks","created_at":"2026-02-17T18:01:51.528787Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
{"id":"bd-f2b.9","title":"Implement image loading with ThumbHash placeholders","description":"FOUNDATIONAL COMPONENT: This is needed by ALL screens that show images. Must be in Phase B with other base components. Install expo-image (part of SDK) and a ThumbHash encoding library (e.g., thumbhash or @evanw/thumbhash). Create src/components/ui/OptimizedImage.tsx. Implement ThumbHash placeholder rendering (instant, ~100 bytes per image embedded in content). Crossfade animation on image load using reanimated. Responsive image loading: 400w for list thumbnails, 800w for hero images, 1200w for galleries. Priority system: prefetch first 10 visible cards. Error handling with fallback image. Cache configuration. Performance target: no jank during scroll in image-heavy lists. Test: images load smoothly, placeholders appear instantly, no layout shift (aspectRatio preserved).","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-17T17:40:02.917127Z","created_by":"osekkat","updated_at":"2026-02-17T18:04:52.747181Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["components","design-system","images","phase-b"],"dependencies":[{"issue_id":"bd-f2b.9","depends_on_id":"bd-1xp.7","type":"blocks","created_at":"2026-02-17T18:04:52.747161Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.9","depends_on_id":"bd-31h","type":"parent-child","created_at":"2026-02-17T18:00:18.165816Z","created_by":"osekkat","metadata":"{}","thread_id":""},{"issue_id":"bd-f2b.9","depends_on_id":"bd-31h.1","type":"blocks","created_at":"2026-02-17T18:00:18.188278Z","created_by":"osekkat","metadata":"{}","thread_id":""}]}
